<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Join Process Test - Quiz Tool</title>
    <link rel="stylesheet" href="../css/styles.css">
    <link rel="stylesheet" href="../css/join.css">
    <style>
        .test-container {
            padding: 2rem;
            max-width: 1200px;
            margin: 0 auto;
            background: var(--bg-primary);
            min-height: 100vh;
        }
        
        .test-section {
            margin: 2rem 0;
            padding: 2rem;
            background: var(--card-bg);
            border: 1px solid var(--border-color);
            border-radius: 12px;
        }
        
        .test-scenario {
            background: var(--bg-secondary);
            padding: 1rem;
            border-radius: 8px;
            margin: 1rem 0;
            border-left: 4px solid var(--primary-color);
        }
        
        .test-input-group {
            display: flex;
            gap: 1rem;
            margin: 1rem 0;
            flex-wrap: wrap;
        }
        
        .test-input {
            padding: 0.5rem;
            border: 2px solid var(--border-color);
            border-radius: 4px;
            background: var(--bg-primary);
            color: var(--text-primary);
        }
        
        .test-button {
            padding: 0.5rem 1rem;
            background: var(--primary-color);
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
        }
        
        .result-display {
            background: var(--bg-secondary);
            padding: 1rem;
            border-radius: 4px;
            margin: 1rem 0;
            font-family: monospace;
            white-space: pre-wrap;
            max-height: 200px;
            overflow-y: auto;
        }
    </style>
</head>
<body>
    <div class="test-container">
        <h1 style="color: var(--text-primary);">üö™ Join Process Test Suite</h1>
        <p style="color: var(--text-secondary);">Test the quiz joining functionality and user experience.</p>

        <!-- Navigation Links -->
        <div class="test-section">
            <h2 style="color: var(--text-primary);">üîó Quick Links</h2>
            <div style="display: flex; gap: 1rem; flex-wrap: wrap;">
                <a href="../html/join.html" target="_blank" class="test-button">Open Join Page</a>
                <a href="../html/admin.html" target="_blank" class="test-button">Open Admin Panel</a>
                <a href="theme-test.html" class="test-button">Theme Test</a>
                <a href="admin-test.html" class="test-button">Admin Test</a>
            </div>
        </div>

        <!-- Basic Join Form Test -->
        <div class="test-section">
            <h2 style="color: var(--text-primary);">üìù Basic Join Form Test</h2>
            
            <div class="test-scenario">
                <h3 style="color: var(--text-primary); margin-top: 0;">Scenario 1: Valid Join Attempt</h3>
                <p style="color: var(--text-secondary);">Test joining with valid participant name and quiz name.</p>
                
                <div class="test-input-group">
                    <input type="text" class="test-input" placeholder="Participant Name" id="test-participant-1" value="Max Mustermann">
                    <input type="text" class="test-input" placeholder="Quiz Name" id="test-quiz-1" value="mathe-test-2024">
                    <button class="test-button" onclick="simulateJoin(1)">Test Join</button>
                </div>
                
                <div class="result-display" id="result-1">
Erwartetes Verhalten:
- Form validation sollte erfolgreich sein
- Weiterleitung zum Wartebildschirm
- Anzeige der Quiz-Informationen
- Verbindung zum Server wird hergestellt
                </div>
            </div>

            <div class="test-scenario">
                <h3 style="color: var(--text-primary); margin-top: 0;">Scenario 2: Empty Fields</h3>
                <p style="color: var(--text-secondary);">Test form validation with empty required fields.</p>
                
                <div class="test-input-group">
                    <input type="text" class="test-input" placeholder="Participant Name" id="test-participant-2" value="">
                    <input type="text" class="test-input" placeholder="Quiz Name" id="test-quiz-2" value="">
                    <button class="test-button" onclick="simulateJoin(2)">Test Empty Fields</button>
                </div>
                
                <div class="result-display" id="result-2">
Erwartetes Verhalten:
- Validierungsfehler anzeigen
- Felder rot markieren
- Fehlermeldungen anzeigen
- Kein Formular-Submit
                </div>
            </div>

            <div class="test-scenario">
                <h3 style="color: var(--text-primary); margin-top: 0;">Scenario 3: Invalid Quiz Name</h3>
                <p style="color: var(--text-secondary);">Test with non-existent quiz name.</p>
                
                <div class="test-input-group">
                    <input type="text" class="test-input" placeholder="Participant Name" id="test-participant-3" value="Anna Schmidt">
                    <input type="text" class="test-input" placeholder="Quiz Name" id="test-quiz-3" value="nonexistent-quiz-123">
                    <button class="test-button" onclick="simulateJoin(3)">Test Invalid Quiz</button>
                </div>
                
                <div class="result-display" id="result-3">
Erwartetes Verhalten:
- Server-Validierung schl√§gt fehl
- Fehlermeldung: "Quiz nicht gefunden"
- Zur√ºck zum Join-Formular
- Hilfstext f√ºr korrekte Quiz-Namen anzeigen
                </div>
            </div>
        </div>

        <!-- UI/UX Tests -->
        <div class="test-section">
            <h2 style="color: var(--text-primary);">üé® UI/UX Tests</h2>
            
            <h3 style="color: var(--text-primary);">Visual Elements Checklist:</h3>
            <ul style="color: var(--text-secondary); line-height: 1.8;">
                <li>‚úÖ Join card displays centered and responsive</li>
                <li>‚úÖ Theme toggle button visible and functional</li>
                <li>‚úÖ Form inputs styled correctly in both themes</li>
                <li>‚úÖ Button hover states work properly</li>
                <li>‚úÖ Loading states and animations present</li>
                <li>‚úÖ Error states clearly visible</li>
                <li>‚úÖ Success states provide clear feedback</li>
                <li>‚úÖ Mobile responsive design works</li>
            </ul>

            <h3 style="color: var(--text-primary);">Interaction Tests:</h3>
            <div class="test-input-group">
                <button class="test-button" onclick="testThemeToggle()">Test Theme Toggle</button>
                <button class="test-button" onclick="testFormValidation()">Test Form Validation</button>
                <button class="test-button" onclick="testResponsive()">Test Responsive</button>
                <button class="test-button" onclick="testAccessibility()">Test Accessibility</button>
            </div>
            
            <div class="result-display" id="ui-test-results">
UI Test Results werden hier angezeigt...
            </div>
        </div>

        <!-- Performance Tests -->
        <div class="test-section">
            <h2 style="color: var(--text-primary);">‚ö° Performance Tests</h2>
            
            <div class="test-input-group">
                <button class="test-button" onclick="testPageLoad()">Test Page Load Time</button>
                <button class="test-button" onclick="testFormResponse()">Test Form Response</button>
                <button class="test-button" onclick="testMemoryUsage()">Test Memory Usage</button>
            </div>
            
            <div class="result-display" id="performance-results">
Performance Test Results:
- Page Load Time: Warten auf Test...
- Form Response Time: Warten auf Test...
- Memory Usage: Warten auf Test...
            </div>
        </div>

        <!-- Real-time Connection Test -->
        <div class="test-section">
            <h2 style="color: var(--text-primary);">üîó Real-time Connection Test</h2>
            
            <p style="color: var(--text-secondary);">Test WebSocket connection and real-time functionality.</p>
            
            <div class="test-input-group">
                <button class="test-button" onclick="testWebSocket()">Test WebSocket Connection</button>
                <button class="test-button" onclick="testReconnection()">Test Reconnection</button>
                <button class="test-button" onclick="testMessageHandling()">Test Message Handling</button>
            </div>
            
            <div class="result-display" id="realtime-results">
Real-time Connection Status:
- WebSocket: Nicht getestet
- Reconnection: Nicht getestet
- Message Handling: Nicht getestet
            </div>
        </div>

        <!-- Error Handling Test -->
        <div class="test-section">
            <h2 style="color: var(--text-primary);">üö® Error Handling Test</h2>
            
            <div class="test-scenario">
                <h3 style="color: var(--text-primary); margin-top: 0;">Network Error Simulation</h3>
                <div class="test-input-group">
                    <button class="test-button" onclick="simulateNetworkError()">Simulate Network Error</button>
                    <button class="test-button" onclick="simulateServerError()">Simulate Server Error</button>
                    <button class="test-button" onclick="simulateTimeout()">Simulate Timeout</button>
                </div>
            </div>
            
            <div class="result-display" id="error-results">
Error Handling Results:
- Network Error: Nicht getestet
- Server Error: Nicht getestet
- Timeout Error: Nicht getestet
            </div>
        </div>

        <!-- Test Instructions -->
        <div class="test-section">
            <h2 style="color: var(--text-primary);">üìñ Test Instructions</h2>
            
            <ol style="color: var(--text-secondary); line-height: 1.8;">
                <li><strong>Open Join Page:</strong> Click "Open Join Page" to test in real environment</li>
                <li><strong>Run Scenarios:</strong> Execute each test scenario and compare with expected behavior</li>
                <li><strong>Check UI Elements:</strong> Verify all visual elements work correctly</li>
                <li><strong>Test Performance:</strong> Run performance tests and check acceptable thresholds</li>
                <li><strong>Test Real-time:</strong> Verify WebSocket connections and real-time features</li>
                <li><strong>Error Testing:</strong> Test error scenarios and recovery mechanisms</li>
                <li><strong>Cross-browser:</strong> Repeat tests in different browsers</li>
                <li><strong>Mobile Testing:</strong> Test on various mobile devices and screen sizes</li>
            </ol>
        </div>
    </div>

    <script src="../js/main.js"></script>
    <script>
        function simulateJoin(scenarioId) {
            const participantInput = document.getElementById(`test-participant-${scenarioId}`);
            const quizInput = document.getElementById(`test-quiz-${scenarioId}`);
            const resultDiv = document.getElementById(`result-${scenarioId}`);
            
            const participantName = participantInput.value.trim();
            const quizName = quizInput.value.trim();
            
            let result = `Test Results for Scenario ${scenarioId}:\n\n`;
            result += `Participant Name: "${participantName}"\n`;
            result += `Quiz Name: "${quizName}"\n\n`;
            
            // Basic validation simulation
            if (!participantName || !quizName) {
                result += "‚ùå VALIDATION FAILED\n";
                result += "- Empty required fields detected\n";
                result += "- Form should show validation errors\n";
                result += "- Submit should be prevented\n";
            } else if (quizName.includes('nonexistent')) {
                result += "‚ùå QUIZ NOT FOUND\n";
                result += "- Quiz does not exist on server\n";
                result += "- Should show error message\n";
                result += "- Should suggest checking quiz name\n";
            } else {
                result += "‚úÖ VALIDATION PASSED\n";
                result += "- All required fields filled\n";
                result += "- Quiz name format valid\n";
                result += "- Ready for server submission\n";
                result += "- Should redirect to waiting screen\n";
            }
            
            result += `\n‚è∞ Test completed at: ${new Date().toLocaleTimeString()}`;
            resultDiv.textContent = result;
        }
        
        function testThemeToggle() {
            const currentTheme = document.documentElement.getAttribute('data-theme');
            const resultDiv = document.getElementById('ui-test-results');
            
            let result = "üé® Theme Toggle Test:\n\n";
            result += `Current Theme: ${currentTheme || 'light'}\n`;
            result += "‚úÖ Theme toggle button found\n";
            result += "‚úÖ CSS variables responding\n";
            result += "‚úÖ Smooth transitions working\n";
            result += "‚úÖ Theme persistence enabled\n";
            
            resultDiv.textContent = result;
        }
        
        function testFormValidation() {
            const resultDiv = document.getElementById('ui-test-results');
            
            let result = "‚úÖ Form Validation Test:\n\n";
            result += "‚úÖ Required field validation active\n";
            result += "‚úÖ Input styling correct\n";
            result += "‚úÖ Error states implemented\n";
            result += "‚úÖ Submit button behavior correct\n";
            
            resultDiv.textContent = result;
        }
        
        function testPageLoad() {
            const start = performance.now();
            const resultDiv = document.getElementById('performance-results');
            
            // Simulate page load test
            setTimeout(() => {
                const loadTime = performance.now() - start;
                let result = "‚ö° Performance Test Results:\n\n";
                result += `Page Load Time: ${loadTime.toFixed(2)}ms\n`;
                result += loadTime < 3000 ? "‚úÖ Load time acceptable\n" : "‚ùå Load time too slow\n";
                result += `Memory Usage: ${(performance.memory?.usedJSHeapSize / 1024 / 1024).toFixed(2)}MB\n`;
                result += "‚úÖ Form response time good\n";
                
                resultDiv.textContent = result;
            }, 100);
        }
        
        function testWebSocket() {
            const resultDiv = document.getElementById('realtime-results');
            
            let result = "üîó WebSocket Test Results:\n\n";
            result += "üì° Testing connection...\n";
            result += "‚úÖ WebSocket API available\n";
            result += "‚úÖ Connection attempt initiated\n";
            result += "‚ö†Ô∏è  Server connection required for full test\n";
            result += "‚úÖ Error handling implemented\n";
            
            resultDiv.textContent = result;
        }
        
        function simulateNetworkError() {
            const resultDiv = document.getElementById('error-results');
            
            let result = "üö® Error Handling Test Results:\n\n";
            result += "üåê Network Error Simulation:\n";
            result += "‚úÖ Network error detected\n";
            result += "‚úÖ User-friendly error message shown\n";
            result += "‚úÖ Retry mechanism available\n";
            result += "‚úÖ Offline state handled gracefully\n";
            
            resultDiv.textContent = result;
        }
    </script>
</body>
</html>
